"use strict";(self.webpackChunkomega_cli=self.webpackChunkomega_cli||[]).push([[962],{4962:(B,c,r)=>{r.r(c),r.d(c,{AccessDenyComponent:()=>v,AuthModule:()=>w,AuthRoutingModule:()=>h,LoginComponent:()=>d,LogoutComponent:()=>f});var s=r(2382),A=r(8505),C=r(4351),m=r(1743),g=r(7909),o=r(5e3),a=r(4404),b=r(8100),T=r(4146),u=r(9808);function y(t,i){1&t&&(o.TgZ(0,"div"),o._uU(1,"email is required"),o.qZA())}function L(t,i){if(1&t&&(o.TgZ(0,"div",18),o.YNc(1,y,2,0,"div",19),o.qZA()),2&t){const e=o.oxw();o.xp6(1),o.Q6J("ngIf",e.f.email.errors.required)}}function S(t,i){1&t&&(o.TgZ(0,"div"),o._uU(1,"Password is required"),o.qZA())}function Y(t,i){if(1&t&&(o.TgZ(0,"div",18),o.YNc(1,S,2,0,"div",19),o.qZA()),2&t){const e=o.oxw();o.xp6(1),o.Q6J("ngIf",e.f.password.errors.required)}}function J(t,i){1&t&&o._UZ(0,"span",20)}function U(t,i){if(1&t&&(o.TgZ(0,"div",21),o._uU(1),o.qZA()),2&t){const e=o.oxw();o.xp6(1),o.Oqu(e.error)}}const p=function(t){return{"is-invalid":t}},l=new m.Yd("LoginComponent");let d=(()=>{class t{constructor(e,n,Z,N,Q,M){this.formBuilder=e,this.route=n,this.router=Z,this.authenticationService=N,this.userService=Q,this.storageService=M,this.loading=!1,this.submitted=!1,this.error=""}ngOnInit(){this.loginForm=this.formBuilder.group({email:["",s.kI.required],password:["",s.kI.required]})}get f(){return this.loginForm.controls}onSubmit(){this.submitted=!0,this.loginForm.invalid||(this.authenticationService.logout(),this.loading=!0,this.authenticationService.login(this.loginForm.value).pipe((0,A.b)(n=>l.debug("First result",n)),(0,C.b)(()=>this.userService.getUser())).subscribe({next:n=>{this.storageService.user=n.user,l.debug("Second result",this.storageService.user),this.router.navigate(["main"])},error:n=>{l.debug("",n),this.error=n,this.loading=!1},complete:()=>{}}))}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(s.qu),o.Y36(a.gz),o.Y36(a.F0),o.Y36(b.e),o.Y36(g.K),o.Y36(T.Pu))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-login"]],features:[o._Bn([g.K])],decls:25,vars:12,consts:[[1,"login-body"],["id","login-wrapper"],["src","assets/layout/images/login-logo.png","alt","omega-layout"],["id","login-container"],[1,"title"],[1,"p-grid","p-fluid",3,"formGroup","ngSubmit"],[1,"form-group"],["for","email",1,"p-col-12","p-md-6"],["type","text","formControlName","email","placeholder","email",1,"form-control","p-col-12","p-md-6",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],[1,"form-group","p-col-12"],["for","password",1,"p-col-12","p-md-6"],["type","password","formControlName","password",1,"form-control","p-col-12","p-md-6",3,"ngClass"],[1,"btn","btn-primary","p-col-12","p-md-6",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["routerLink","/account/register",1,"btn","btn-link","p-col-12","p-md-6"],["class","alert alert-danger mt-3 mb-0",4,"ngIf"],[1,"login-footer"],[1,"invalid-feedback"],[4,"ngIf"],[1,"spinner-border","spinner-border-sm","mr-1"],[1,"alert","alert-danger","mt-3","mb-0"]],template:function(e,n){1&e&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o._UZ(2,"img",2),o.TgZ(3,"div",3),o.TgZ(4,"span",4),o._uU(5,"Omega"),o.qZA(),o.TgZ(6,"form",5),o.NdJ("ngSubmit",function(){return n.onSubmit()}),o.TgZ(7,"div",6),o.TgZ(8,"label",7),o._uU(9,"Email"),o.qZA(),o._UZ(10,"input",8),o.YNc(11,L,2,1,"div",9),o.qZA(),o.TgZ(12,"div",10),o.TgZ(13,"label",11),o._uU(14,"Password"),o.qZA(),o._UZ(15,"input",12),o.YNc(16,Y,2,1,"div",9),o.qZA(),o.TgZ(17,"button",13),o.YNc(18,J,1,0,"span",14),o._uU(19," Login "),o.qZA(),o.TgZ(20,"a",15),o._uU(21,"Register"),o.qZA(),o.YNc(22,U,2,1,"div",16),o.qZA(),o.qZA(),o.TgZ(23,"div",17),o._uU(24,"PrimeNG Omega"),o.qZA(),o.qZA(),o.qZA()),2&e&&(o.xp6(6),o.Q6J("formGroup",n.loginForm),o.xp6(4),o.Q6J("ngClass",o.VKq(8,p,n.submitted&&n.f.email.errors)),o.xp6(1),o.Q6J("ngIf",n.submitted&&n.f.email.errors),o.xp6(4),o.Q6J("ngClass",o.VKq(10,p,n.submitted&&n.f.password.errors)),o.xp6(1),o.Q6J("ngIf",n.submitted&&n.f.password.errors),o.xp6(1),o.Q6J("disabled",n.loading),o.xp6(1),o.Q6J("ngIf",n.loading),o.xp6(4),o.Q6J("ngIf",n.error))},directives:[s._Y,s.JL,s.sg,s.Fj,s.JJ,s.u,u.mk,u.O5,a.yS],styles:[""]}),t})();var q=r(4372);const x=new m.Yd("LogoutComponent");let f=(()=>{class t{constructor(e,n){this.router=e,this.authenticationService=n}ngOnInit(){this.logout()}logout(){x.debug("logout..."),this.authenticationService.logout(),this.router.navigate(["/auth"])}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(a.F0),o.Y36(q.e8))},t.\u0275cmp=o.Xpm({type:t,selectors:[["ng-component"]],decls:0,vars:0,template:function(e,n){},encapsulation:2}),t})(),v=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-access-deny"]],decls:2,vars:0,template:function(e,n){1&e&&(o.TgZ(0,"p"),o._uU(1,"access-deny works!"),o.qZA())},styles:[""]}),t})();const I=[{path:"",component:d},{path:"accessdeny",component:v},{path:"logout",component:f}];let h=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[a.Bz.forChild(I)],a.Bz]}),t})();var F=r(1208);let w=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[u.ez,F.nD,s.UX,h]]}),t})()}}]);