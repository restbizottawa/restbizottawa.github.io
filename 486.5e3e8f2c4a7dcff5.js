"use strict";(self.webpackChunkomega_cli=self.webpackChunkomega_cli||[]).push([[486],{2486:($,v,i)=>{i.r(v),i.d(v,{BusinessForm:()=>y,BusinessModule:()=>q,BusinessRoutingModule:()=>U,DetailComponent:()=>I,HoursForm:()=>M});var l=i(2382),g=i(8979);class y extends g.a{constructor(){super()}get emailConfig(){return this.fields[0]}get dateConfig(){return this.fields[2]}get fields(){return this.fieldConfigs||(this.fieldConfigs=[{type:"text",inputType:"email",name:"email",label:"Email",value:"",validations:[{name:"required",validator:l.kI.required,message:"Email Required"},{name:"pattern",validator:l.kI.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,4}$"),message:"Invalid email"}]},{type:"date",name:"time",label:"Registered Date",value:new Date,showTime:!1}]),this.fieldConfigs}}class M extends g.a{}var p=i(9783),u=i(1743);class H{constructor(){this.formModel=new y}}var e=i(5e3),d=i(4404),b=i(4146),C=i(72);const w=new u.Yd("DetailInteractor");let Z=(()=>{class o{constructor(t,r,s,c,m){this.route=t,this.companyService=r,this.messageService=s,this.confirmationService=c,this.spinnerService=m,this.presenter=new H,this.subscriptions=[]}loadData(){this.presenter.formModel.isEdit=!1}subscribeChanges(){this.spinnerService.show(),this.subscriptions.push(this.route.data.subscribe(t=>{var r=t.data;w.debug(r),this.presenter.formModel.notifierToUpdateForm.next(Object.keys(r).map(s=>({name:s,value:r[s]}))),this.spinnerService.hide()},t=>{w.debug("Second result with error",t)}))}submit(t){this.companyService.updateCompanyDetails(t).subscribe(r=>{this.presenter.formModel.emailConfig.value=r.data.updateCompany.email,r.data.updateCompany.created&&(this.presenter.formModel.dateConfig.value=new Date(r.data.updateCompany.created)),this.presenter.formModel.isEdit=!1})}unsubscribeChanges(){this.subscriptions.length&&this.subscriptions.forEach(t=>t.unsubscribe())}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(d.gz),e.LFG(b.JN),e.LFG(p.ez),e.LFG(p.YP),e.LFG(C.t2))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})();var x=i(2193),n=i(9808),D=i(7579),T=i(515),A=i(262),S=i(4004),G=i(4185);class k{constructor(){this.formModel=new M}}class B{}var Y=i(4372);const h=new u.Yd("HoursInteractor");let O=(()=>{class o{constructor(t,r,s,c,m,f){this.route=t,this.router=r,this.companyService=s,this.messageService=c,this.confirmationService=m,this.spinnerService=f,this.notifierSaved=new D.x,this.subscriptions=[],this.presenter=new k,this.loading=!1}loadData(){this.presenter.hoursOptions=["08:00 AM","08:30 AM","09:00 AM","09:30 AM","10:00 AM","10:30 AM","11:00 AM","11:30 AM","12:00 PM","12:30 PM","01:00 PM","01:30 PM","02:00 PM","02:30 PM","03:00 PM","03:30 PM","04:00 PM","04:30 PM","05:00 PM","05:30 PM","06:00 PM","06:30 PM","07:00 PM","07:30 PM","08:00 PM","08:30 PM","09:00 PM","09:30 PM","10:00 PM","10:30 PM","11:00 PM","11:30 PM"].map(s=>({name:s,code:s}));var t=this.presenter.formModel.fieldConfigs=[{weekday:n.VR.Monday,from:this.presenter.hoursOptions[0].code,to:this.presenter.hoursOptions[this.presenter.hoursOptions.length-1].code,acitive:!1},{weekday:n.VR.Tuesday,from:this.presenter.hoursOptions[0].code,to:this.presenter.hoursOptions[this.presenter.hoursOptions.length-1].code,acitive:!1},{weekday:n.VR.Wednesday,from:this.presenter.hoursOptions[0].code,to:this.presenter.hoursOptions[this.presenter.hoursOptions.length-1].code,acitive:!1},{weekday:n.VR.Thursday,from:this.presenter.hoursOptions[0].code,to:this.presenter.hoursOptions[this.presenter.hoursOptions.length-1].code,acitive:!1},{weekday:n.VR.Friday,from:this.presenter.hoursOptions[0].code,to:this.presenter.hoursOptions[this.presenter.hoursOptions.length-1].code,acitive:!1},{weekday:n.VR.Saturday,from:this.presenter.hoursOptions[0].code,to:this.presenter.hoursOptions[this.presenter.hoursOptions.length-1].code,acitive:!1},{weekday:n.VR.Sunday,from:this.presenter.hoursOptions[0].code,to:this.presenter.hoursOptions[this.presenter.hoursOptions.length-1].code,acitive:!1}],r={};for(let s of t)r[n.VR[s.weekday]+"_active"]=new l.NI(s.acitive),r[n.VR[s.weekday]+"_from"]=new l.NI(s.from),r[n.VR[s.weekday]+"_to"]=new l.NI(s.to);this.presenter.formModel.form=new l.cw(r),this.observableData=this.companyService.getCompany("company/hours","network-only").pipe((0,A.K)(s=>(h.error(s),(0,T.c)()))).pipe((0,S.U)(s=>s.company.hours.map(c=>new G.y(B).map(c))))}reloadData(t){const r=new n.uU("en-US");t.forEach(s=>{if(s.from&&s.to){let f=n.VR[s.weekday]+"_to",X={[n.VR[s.weekday]+"_active"]:s.active,[n.VR[s.weekday]+"_from"]:r.transform(new Date(s.from),"hh:mm a"),[f]:r.transform(new Date(s.to),"hh:mm a")};this.presenter.formModel.form.patchValue(X)}})}subscribeChanges(){this.spinnerService.show(),this.observableData&&this.subscriptions.push(this.observableData.subscribe(t=>{h.debug("xxx"),h.debug(t),this.reloadData(t),this.spinnerService.hide()}))}submit(t){if(t.preventDefault(),t.stopPropagation(),this.presenter.formModel.form.valid){var r=[];Object.keys(n.VR).map(s=>{this.presenter.formModel.form.value[n.VR[s]+"_to"]&&this.presenter.formModel.form.value[n.VR[s]+"_to"]&&r.push({weekday:s,from:this.presenter.formModel.form.value[n.VR[s]+"_from"],to:this.presenter.formModel.form.value[n.VR[s]+"_to"],active:this.presenter.formModel.form.value[n.VR[s]+"_active"]})}),h.debug(r),this.companyService.updateCompanyHours(r).subscribe(s=>{})}}unsubscribeChanges(){this.subscriptions.length&&this.subscriptions.forEach(t=>t.unsubscribe())}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(d.gz),e.LFG(d.F0),e.LFG(Y.JN),e.LFG(p.ez),e.LFG(p.YP),e.LFG(C.t2))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})();var R=i(4534),P=i(845),V=i(8952),F=i(242),N=i(4036);function J(o,a){1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"th"),e._uU(2,"Active"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Week Day"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"From"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"To"),e.qZA(),e.qZA())}function L(o,a){if(1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"td"),e._UZ(2,"p-inputSwitch",5),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._UZ(6,"p-dropdown",6),e.qZA(),e.TgZ(7,"td"),e._UZ(8,"p-dropdown",6),e.qZA(),e.qZA()),2&o){const t=a.$implicit,r=e.oxw();e.xp6(2),e.MGl("formControlName","",r.getWeekdayName(t.weekday),"_active"),e.xp6(2),e.Oqu(r.getWeekdayName(t.weekday)),e.xp6(2),e.MGl("formControlName","",r.getWeekdayName(t.weekday),"_from"),e.Q6J("options",r.viewModel.hoursOptions),e.xp6(2),e.MGl("formControlName","",r.getWeekdayName(t.weekday),"_to"),e.Q6J("options",r.viewModel.hoursOptions)}}const z=new u.Yd("HoursComponent");let E=(()=>{class o{constructor(t){this.interactor=t,this.saved=new D.x}ngOnInit(){this.interactor.notifierSaved=this.saved,this.viewModel=this.interactor.presenter,this.interactor.loadData(),this.form=this.viewModel.formModel.form,this.interactor.subscribeChanges()}ngOnDestroy(){this.interactor.unsubscribeChanges()}getWeekdayName(t){return n.VR[t]}submit(t){z.debug(t)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(O))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-hours"]],outputs:{saved:"saved"},features:[e._Bn([p.YP,O])],decls:6,vars:2,consts:[[1,"p-toolbar-group-left"],["label","Submit","icon","pi pi-check",3,"onClick"],[3,"value","formGroup"],["pTemplate","header"],["pTemplate","body"],[3,"formControlName"],["optionLabel","name","optionValue","code","editable","true","dropdownIcon","pi pi-clock",3,"options","formControlName"]],template:function(t,r){1&t&&(e.TgZ(0,"p-toolbar"),e.TgZ(1,"div",0),e.TgZ(2,"p-button",1),e.NdJ("onClick",function(c){return r.interactor.submit(c)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(3,"p-table",2),e.YNc(4,J,9,0,"ng-template",3),e.YNc(5,L,9,6,"ng-template",4),e.qZA()),2&t&&(e.xp6(3),e.Q6J("value",r.viewModel.formModel.fieldConfigs)("formGroup",r.form))},directives:[R.o,P.zx,V.iA,l.JL,l.sg,p.jx,F.Ql,l.JJ,l.u,N.Lt],styles:[""]}),o})();new u.Yd("DetailComponent");let I=(()=>{class o{constructor(t){this.interactor=t}ngOnInit(){this.interactor.loadData(),this.viewModel=this.interactor.presenter,this.interactor.subscribeChanges()}submit(t){}ngOnDestroy(){this.interactor.unsubscribeChanges()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Z))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-detail"]],features:[e._Bn([p.YP,Z])],decls:11,vars:2,consts:[[1,"p-grid"],[1,"p-col-12"],[1,"card"],[3,"model","isCancelVisible","submit"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h5"),e._uU(4,"Details"),e.qZA(),e.TgZ(5,"app-dynamic-form-builder-component",3),e.NdJ("submit",function(c){return r.interactor.submit(c)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div",1),e.TgZ(7,"div",2),e.TgZ(8,"h5"),e._uU(9,"Hours"),e.qZA(),e._UZ(10,"app-hours"),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(5),e.Q6J("model",r.viewModel.formModel)("isCancelVisible",!0))},directives:[x.U,E],styles:[""]}),o})();const W=new u.Yd("DetailResolverService"),j=[{path:"",pathMatch:"full",redirectTo:"detail"},{path:"detail",component:I,resolve:{data:(()=>{class o{constructor(t){this.companyService=t}resolve(t,r){return this.companyService.getCompany(r.url).pipe((0,A.K)(s=>(W.error(s),(0,T.c)()))).pipe((0,S.U)(s=>s.company))}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(b.JN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()}}];let U=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[d.Bz.forChild(j)],d.Bz]}),o})();var Q=i(9397);let q=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[P.hJ,n.ez,N.kW,F.Iu,l.UX,Q.m8,V.U$,R.V,U]]}),o})()}}]);